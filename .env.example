# =============================================================================
# GK-Nexus Environment Configuration
# =============================================================================
# SIMPLE SETUP (linuxserver.io style):
#   1. cp .env.example .env
#   2. Generate secrets: openssl rand -base64 32
#   3. Update POSTGRES_PASSWORD and DATABASE_URL (passwords MUST match!)
#   4. docker compose up -d
#
# IMPORTANT: DATABASE_URL password must match POSTGRES_PASSWORD!
# If you change one, you must change the other.
# Run ./scripts/sync-database-url.sh to auto-sync them.
# =============================================================================

# =============================================================================
# DATABASE (REQUIRED)
# =============================================================================
# STEP 1: Generate password: openssl rand -base64 32
POSTGRES_PASSWORD="CHANGE_ME_use_openssl_rand_base64_32"

# STEP 2: Update DATABASE_URL with the SAME password from above!
#         Replace "CHANGE_ME_use_openssl_rand_base64_32" with your generated password
DATABASE_URL="postgresql://gknexus:CHANGE_ME_use_openssl_rand_base64_32@postgres:5432/gknexus"

# Database settings (usually don't need to change)
POSTGRES_DB="gknexus"
POSTGRES_USER="gknexus"
POSTGRES_PORT=5432

# =============================================================================
# AUTHENTICATION (REQUIRED)
# =============================================================================
# Generate a secure 32+ character secret:
#   openssl rand -base64 32
# Example output: XyZ123AbC456DeF789GhI012JkL345MnO678PqR==
BETTER_AUTH_SECRET="your-32-character-minimum-secret-key-here"

# Backend URL (used by Better-Auth for redirects)
# PRODUCTION: Set to your actual domain
# Example: BETTER_AUTH_URL="https://gcmc.karetechsolutions.com"
BETTER_AUTH_URL="http://localhost:3000"

# CORS origin for frontend (comma-separated for multiple)
# PRODUCTION: Set to your actual domain(s)
# Example: CORS_ORIGIN="https://gcmc.karetechsolutions.com"
CORS_ORIGIN="http://localhost:3001"

# Trusted origins for Better-Auth (REQUIRED FOR PRODUCTION)
# Add all domains where users will access the app
# Format: comma-separated list of full URLs
# Example: TRUSTED_ORIGINS="https://gcmc.karetechsolutions.com,https://www.gcmc.karetechsolutions.com"
TRUSTED_ORIGINS="http://localhost:3000,http://localhost:3001"

# =============================================================================
# INITIAL ADMIN SETUP (REQUIRED FOR FIRST RUN)
# =============================================================================
# These credentials create the first owner account on startup
INITIAL_OWNER_EMAIL="admin@yourcompany.com"
# Generate secure password with: openssl rand -base64 32
# Or use a strong password manager to generate a memorable password
INITIAL_OWNER_PASSWORD="ChangeMe123!SecurePassword"
INITIAL_OWNER_NAME="Administrator"

# =============================================================================
# APPLICATION (OPTIONAL)
# =============================================================================
# Node environment (production, development, test)
NODE_ENV="production"

# Internal application port (container)
PORT=3000

# External port exposed to host (for reverse proxy)
# Set this to match your reverse proxy configuration
# Example: APP_PORT=8843 for Pangolin proxy
APP_PORT=3000

# =============================================================================
# FRONTEND (REQUIRED FOR FRONTEND DEV)
# =============================================================================
# API endpoint for Vite development server
VITE_SERVER_URL="http://localhost:3000"

# =============================================================================
# EMAIL (OPTIONAL)
# =============================================================================
# Resend API key for sending emails
# Get from: https://resend.com/api-keys
# IMPORTANT: You must verify your domain at resend.com/domains first!
RESEND_API_KEY="re_your_api_key_here"
EMAIL_FROM="noreply@your-verified-domain.com"

# =============================================================================
# CLOUD BACKUP (OPTIONAL)
# =============================================================================
# S3-compatible storage for automated backups
# Works with AWS S3, Cloudflare R2, MinIO, etc.
BACKUP_S3_ENDPOINT="https://your-endpoint.com"
BACKUP_S3_ACCESS_KEY_ID="your_access_key"
BACKUP_S3_SECRET_ACCESS_KEY="your_secret_key"
BACKUP_S3_BUCKET="gk-nexus-backups"
BACKUP_S3_REGION="auto"

# =============================================================================
# DOCKER-SPECIFIC (FOR DEVELOPMENT ONLY)
# =============================================================================
# User/Group IDs for file permissions (LinuxServer.io style)
# Uncomment if you need custom UID/GID
# PUID=1000
# PGID=1000
# TZ=America/New_York
